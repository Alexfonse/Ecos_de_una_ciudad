<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galería Circular - Ecos de una Ciudad</title>

  <!-- Tipografías y Grid -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap-grid.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;700&family=Open+Sans:wght@400;600&display=swap"
    rel="stylesheet" />

  <!-- Estilos -->
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- Iconos -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body>
  <!-- CARGA -->
  <div id="loader">
    <div class="spinner"></div>
    <p>Cargando ecos...</p>
  </div>

  <!-- HERO -->
  <header class="hero-header">
    <img src="assets/img/prueba.png" alt="Fondo Hero" class="hero-bg" loading="lazy" />
    <div class="hero-overlay">
      <h1 class="titulo-hero">Ecos de una<br><span class="frase-impacto">ciudad</span></h1>
      <p class="subtexto-hero">Explora cómo el pasado, el presente y el futuro se entrelazan en cada rincón de Bogotá.
      </p>
    </div>
    <div class="onda-inferior">
      <svg class="wave" viewBox="0 0 1200 120" preserveAspectRatio="none">
        <defs>
          <path id="wavePath" d="M0,30 C150,80 350,0 600,30 C850,60 1050,10 1200,30 L1200,120 L0,120 Z" />
        </defs>
        <g class="waveGroup">
          <use xlink:href="#wavePath" class="wave-fill" />
          <use xlink:href="#wavePath" class="wave-fill-secondary" />
        </g>
      </svg>
    </div>
  </header>

  <!-- GALERÍA CIRCULAR -->
  <section class="seccion-ondas fade-in-up">
    <div class="container">
      <div class="gallery" id="gallery"></div>
    </div>
  </section>

  <!-- MENÚ Y FOOTER -->
  <nav class="floating-navbar">
    <button class="hamburger" id="hamburger-btn" aria-label="Abrir menú">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </nav>

  <div class="menu-fullscreen" id="menu-fullscreen">
    <ul class="menu-items">
      <li><a href="index.html">Inicio</a></li>
      <li><a href="galeria.html">Galería</a></li>
      <li><a href="galeria3d.html">Galería 3D</a></li>
      <li><a href="blog/index.html">Blog</a></li>
      <li><a href="eventos.html">Eventos</a></li>
      <li><a href="gaitaloma-chat.html">Chat</a></li>
      <li><a href="contacto.html">Contacto</a></li>
      <li><a href="testimonios.html">Testimonios</a></li>
    </ul>
  </div>

  <footer class="footer">
    <p>“Cada rincón guarda un susurro del pasado. Descúbrelo.”</p>
    <div class="redes">
      <a href="https://instagram.com/Focus_Bogota" target="_blank">Instagram</a> |
      <a href="mailto:focus@gmail.com">Correo</a> |
      <a href="https://tiktok.com/@Focus_Bogota" target="_blank">TikTok</a>
    </div>
    <div class="cirgaita">
      <img src="assets/img/prueba_2.png" alt="">
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script>
    // Simulación de carga
    window.addEventListener('load', () => {
      document.getElementById('loader').style.display = 'none';
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <script>
    const gallery = document.getElementById('gallery');
    const imageList = [
      'assets/img/tinta_1.gif',
      'assets/img/prueba.png',
      'assets/img/prueba3.jpeg',
      'assets/img/prueba_2.png',
      'assets/img/prueba.png',
      'assets/img/prueba_2.png',
      'assets/img/prueba.png'
    ];

    const t1 = gsap.timeline();
    const items = [];
    let isGalleryOpen = false;

    const centerX = gallery.offsetWidth / 2;
    const centerY = gallery.offsetHeight / 2;
    const radius = Math.min(gallery.offsetWidth, gallery.offsetHeight) / 4;
    const angleIncrement = (2 * Math.PI) / imageList.length;

    imageList.forEach((fileName, index) => {
      const div = document.createElement('div');
      div.className = 'item';
      const img = document.createElement('img');
      img.src = fileName;
      div.appendChild(img);
      gallery.appendChild(div);
      items.push(div);
    });

    items.forEach((item, index) => {
      const angle = index * angleIncrement;
      const x = centerX + radius * Math.cos(angle);
      const y = centerY + radius * Math.sin(angle);
      const rotation = (angle * 180 / Math.PI) - 90;

      t1.to(item, {
        left: `${x}px`,
        top: `${y}px`,
        rotation,
        scale: 1,
        duration: 1,
        ease: 'power2.out',
        delay: 1
      }, index * 0.1);

      item.addEventListener('click', () => {
        if (!isGalleryOpen) {
          isGalleryOpen = true;
          const duplicate = item.cloneNode(true);
          duplicate.style.position = 'absolute';
          duplicate.style.zIndex = '10000';
          gallery.appendChild(duplicate);

          const backdrop = document.getElementById('zoomBackdrop');
          backdrop.style.display = 'block';
          document.getElementById('closeZoom').style.display = 'block';

          gsap.fromTo(backdrop, { opacity: 0 }, { opacity: 1, duration: 0.5 });

          gsap.to(items.filter(i => i !== item), {
            scale: 0,
            duration: 0.5,
            ease: "power2.in",
            stagger: 0.05
          });

          const endRotation = rotation > 180 ? rotation - 360 : rotation;

          gsap.to([item, duplicate], {
            rotation: endRotation,
            duration: 0.0001,
            onComplete: function () {
              gsap.to([item, duplicate], {
                left: "50%",
                top: "50%",
                transform: "translate(-50%, -50%) scale(3)",
                duration: 1,
                ease: "power2.out",
                delay: 1.25
              });
            }
          });

const closeGallery = () => {
  document.getElementById('closeZoom').style.display = 'none';
  if (isGalleryOpen) {
    gsap.to([item, duplicate], {
      left: `${x}px`,
      top: `${y}px`,
      scale: 1,
      rotation,
      duration: 1,
      ease: "power2.out",
      onComplete: () => {
        duplicate.remove();
        gsap.to(items, {
          scale: 1,
          duration: 1,
          stagger: 0.05,
          ease: "power2.out"
        });
        gsap.to(backdrop, {
          opacity: 0,
          duration: 0.5,
          onComplete: () => backdrop.style.display = 'none'
        });
        isGalleryOpen = false;
      }
    });
  }
};

// ✅ fuera de la función
document.getElementById('closeZoom').addEventListener('click', closeGallery);


          item.addEventListener('click', closeGallery);
          duplicate.addEventListener('click', closeGallery);
        }
      });
    });
  </script>

  <script src="assets/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/before-after-slider"></script>
<div id="zoomBackdrop"
  style="display:none; position:fixed; inset:0; background:#000a; backdrop-filter:blur(6px); z-index:9998;"></div>

<button id="closeZoom"
  style="position:fixed;top:20px;right:20px;width:44px;height:44px;font-size:28px;background:#e97e1c;border:none;border-radius:50%;color:#fff;cursor:pointer;z-index:10001;display:none;box-shadow:0 2px 10px rgba(0,0,0,0.3);">
  &times;
</button>



</body>

</html>